(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("MainForm",{attrs:{metaList:t.metaList},on:{onSubmit:t.addRow,onSubmitEdit:t.editRow,viewModeEdit:function(e){t.viewMode=!t.viewMode}}}),a("MainTable",{attrs:{personList:t.personList,metaList:t.metaList,viewMode:t.viewMode},on:{deleteRow:t.deleteRow}})],1)},s=[],r=(a("4160"),a("a630"),a("a434"),a("b0c0"),a("d3b7"),a("07ac"),a("3ca3"),a("159b"),a("96cf"),a("1da1")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"container"},[t.viewMode?a("transition-group",{staticClass:"table-container",attrs:{name:"table",tag:"div",appear:""}},[a("table",{key:"table",staticClass:"table is-bordered"},[a("thead",[a("tr",[a("th",[t._v("Удалить")]),a("th",[t._v("Редактировать")]),t._l(t.metaList,(function(e){return a("th",{key:e.name},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("transition-group",{attrs:{name:"table",tag:"tbody",appear:""}},t._l(t.personList,(function(e,n){return a("tr",{key:e.CARD+n},[a("td",[a("a",{on:{click:function(e){return e.preventDefault(),t.editRow(n)}}},[t._v("Редактировать")])]),a("td",[a("a",{on:{click:function(e){return e.preventDefault(),t.deleteRow(n)}}},[t._v("Удалить")])]),t._l(e,(function(e){return a("td",{key:e},[t._v(" "+t._s(e)+" ")])}))],2)})),0)],1)]):a("transition-group",{staticClass:"columns-wrapper",attrs:{name:"table",tag:"div",appear:""}},t._l(t.personList,(function(e,n){return a("div",{key:e.CARD+n,staticClass:"others"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-content has-text-left"},t._l(e,(function(e,n){return a("ul",{key:e},[a("li",[a("b",[t._v(t._s(n))]),t._v(": "+t._s(e)+" ")])])})),0)])])})),0)],1)])},c=[],l={name:"MainTable",props:{personList:{type:Array},metaList:{type:Array},viewMode:{type:Boolean}},methods:{editRow:function(t){g.$emit("editRowPerson",this.personList[t],t)},deleteRow:function(t){this.$emit("deleteRow",t)}}},d=l,u=(a("ec15"),a("2877")),m=Object(u["a"])(d,o,c,!1,null,"7988dd4c",null),v=m.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("transition-group",{attrs:{name:"universal",tag:"div"}},[t.isDataAdd?a("div",{key:"note",staticClass:"notification is-primary"},[a("button",{staticClass:"delete",on:{click:function(e){t.isDataAdd=!t.isDataAdd}}}),a("span",[t._v("Изменения внесены")])]):t._e()]),a("div",{staticClass:"container"},[a("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[t._m(0),a("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarPersonApp"},on:{click:function(e){e.preventDefault(),t.isNavActive=!t.isNavActive}}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])]),a("transition-group",{staticClass:"navbar-menu-wrap",attrs:{name:"navbar",tag:"div",appear:""}},[t.isNavActive?a("div",{key:"navbar",staticClass:"navbar-menu is-active",attrs:{id:"navbarPersonApp"}},[a("div",{key:"navbar-end",staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"buttons"},[a("a",{staticClass:"button is-info is-medium",on:{click:t.viewModeEdit}},[a("strong",[t._v("Переключить вид")])]),a("a",{staticClass:"button is-primary is-medium",on:{click:t.activated}},[a("strong",[t._v("Создать запись")])])])])])]):t._e()])],1),a("transition-group",{attrs:{name:"universal",tag:"div"}},[t.isActive||t.isEditActive?a("div",{key:"form",staticClass:"modal is-active"},[a("div",{key:"bg",staticClass:"modal-background",on:{click:t.closeModal}}),a("div",{key:"content",staticClass:"modal-content container"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[t.isEditActive?t._e():a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("h2",{staticClass:"has-text-left"},[t._v("Создать запись")]),t._l(t.metaList,(function(e){return a("div",{key:e.name,staticClass:"field"},[a("label",{staticClass:"label has-text-left"},[t._v(t._s(e.name))]),a("div",{staticClass:"control"},["checkbox"===t.typeValidation(e.name)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.name],expression:"formData[item.name]"}],staticClass:"input",attrs:{required:"CARDTEMPLNAME"!=e.name,placeholder:e.name,type:"checkbox"},domProps:{checked:Array.isArray(t.formData[e.name])?t._i(t.formData[e.name],null)>-1:t.formData[e.name]},on:{change:function(a){var n=t.formData[e.name],i=a.target,s=!!i.checked;if(Array.isArray(n)){var r=null,o=t._i(n,r);i.checked?o<0&&t.$set(t.formData,e.name,n.concat([r])):o>-1&&t.$set(t.formData,e.name,n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.formData,e.name,s)}}}):"radio"===t.typeValidation(e.name)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.name],expression:"formData[item.name]"}],staticClass:"input",attrs:{required:"CARDTEMPLNAME"!=e.name,placeholder:e.name,type:"radio"},domProps:{checked:t._q(t.formData[e.name],null)},on:{change:function(a){return t.$set(t.formData,e.name,null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.name],expression:"formData[item.name]"}],staticClass:"input",attrs:{required:"CARDTEMPLNAME"!=e.name,placeholder:e.name,type:t.typeValidation(e.name)},domProps:{value:t.formData[e.name]},on:{input:function(a){a.target.composing||t.$set(t.formData,e.name,a.target.value)}}})])])})),a("div",{staticClass:"field is-grouped buttons"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[t._v(" Создать ")])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-danger is-light",on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v(" Очистить форму ")])])])],2),t.isEditActive?a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.onSubmitEdit(t.editRowPerson)}}},[a("h2",{staticClass:"has-text-left"},[t._v("Редактировать запись")]),t._l(t.editRowPerson,(function(e,n){return a("div",{key:n,staticClass:"field"},[a("label",{staticClass:"label has-text-left"},[t._v(t._s(n))]),a("div",{staticClass:"control"},["checkbox"===t.typeValidation(n)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.editRowPerson[n],expression:"editRowPerson[name]"}],staticClass:"input",attrs:{required:"CARDTEMPLNAME"!=n,placeholder:n,type:"checkbox"},domProps:{checked:Array.isArray(t.editRowPerson[n])?t._i(t.editRowPerson[n],null)>-1:t.editRowPerson[n]},on:{change:function(e){var a=t.editRowPerson[n],i=e.target,s=!!i.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);i.checked?o<0&&t.$set(t.editRowPerson,n,a.concat([r])):o>-1&&t.$set(t.editRowPerson,n,a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.editRowPerson,n,s)}}}):"radio"===t.typeValidation(n)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.editRowPerson[n],expression:"editRowPerson[name]"}],staticClass:"input",attrs:{required:"CARDTEMPLNAME"!=n,placeholder:n,type:"radio"},domProps:{checked:t._q(t.editRowPerson[n],null)},on:{change:function(e){return t.$set(t.editRowPerson,n,null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.editRowPerson[n],expression:"editRowPerson[name]"}],staticClass:"input",attrs:{required:"CARDTEMPLNAME"!=n,placeholder:n,type:t.typeValidation(n)},domProps:{value:t.editRowPerson[n]},on:{input:function(e){e.target.composing||t.$set(t.editRowPerson,n,e.target.value)}}})])])})),a("div",{staticClass:"field is-grouped buttons"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[t._v(" Создать ")])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-danger is-light",on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v(" Очистить форму ")])])])],2):t._e()])])])]),a("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]):t._e()])],1)],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"navbar-item",attrs:{href:"/"}},[a("h1",{staticClass:"title is-3"},[t._v("person.json app")])])}],b=(a("b64b"),a("5530")),h={name:"MainForm",data:function(){return{formData:{},isActive:!1,isDataAdd:!1,editRowPerson:!1,editPersonIndex:"",isNavActive:!0}},computed:{isEditActive:function(){return 0!=this.editRowPerson}},props:{metaList:{type:Array}},methods:{typeValidation:function(t){return"CARD"===t||"LASTNAME"===t||"FIRSTNAME"===t||"PATRONYMIC"===t||"STATUSNAME"===t||"CARDTEMPLNAME"===t||"ORGNAMESHORT"===t||"PERSONTYPENAME"===t||"CURRNAME"===t||"DOCTYPENAME"===t||"BIRTHDATE"===t?"text":"number"},onSubmit:function(){var t=Object(b["a"])({},this.formData);this.$emit("onSubmit",t),this.resetForm(),this.isActive=!1,this.dataAdd()},onSubmitEdit:function(t){var e=Object(b["a"])({},t),a=this.editPersonIndex;this.$emit("onSubmitEdit",e,a),this.closeModal(),this.dataAdd()},activated:function(){this.isActive=!0},resetForm:function(){var t=this;this.formData={},Object.keys(this.editRowPerson).forEach((function(e){t.editRowPerson[e]=null}))},dataAdd:function(){var t=this;this.isDataAdd=!0,setTimeout((function(){return t.isDataAdd=!1}),1800)},closeModal:function(){this.isActive=!1,this.editRowPerson=!1},viewModeEdit:function(){this.$emit("viewModeEdit")}},created:function(){var t=this;g.$on("editRowPerson",(function(e,a){t.editRowPerson=Object(b["a"])({},e),t.editPersonIndex=a})),window.innerWidth<=1030&&(this.isNavActive=!1)}},w=h,y=(a("ea79"),Object(u["a"])(w,p,f,!1,null,"48375975",null)),C=y.exports,A={name:"app",components:{MainTable:v,MainForm:C},data:function(){return{personList:[],metaList:[],editForm:{},viewMode:!0}},computed:{},methods:{editRow:function(t,e){this.$set(this.personList,e,t)},deleteRow:function(t){this.personList.splice(t,1)},addRow:function(t){this.personList.push(t)}},created:function(){var t=this;Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.$json).then((function(t){return t.json()}));case 2:a=e.sent,n=a.data,t.metaList=Array.from(Object.values(n.metaData)),i=function(t){return new Promise((function(e){var a={};Array.from(Object.values(n.metaData)).forEach((function(e,i){a[e.name]=n.rows[t][i]})),e(a)}))},n.rows.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a,n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i(n);case 2:s=e.sent,t.personList.push(s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})))()}},R=A,_=(a("5c0b"),Object(u["a"])(R,i,s,!1,null,null,null)),P=_.exports;a("c1c3");a.d(e,"eventBus",(function(){return g})),n["a"].config.productionTip=!1;var g=new n["a"];n["a"].prototype.$json="https://api.myjson.com/bins/7iohs",new n["a"]({render:function(t){return t(P)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),i=a.n(n);i.a},"9c0c":function(t,e,a){},be73:function(t,e,a){},c1c3:function(t,e,a){},d506:function(t,e,a){},ea79:function(t,e,a){"use strict";var n=a("d506"),i=a.n(n);i.a},ec15:function(t,e,a){"use strict";var n=a("be73"),i=a.n(n);i.a}});
//# sourceMappingURL=app.ba7628f8.js.map